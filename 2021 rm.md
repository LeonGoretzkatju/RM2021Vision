## 2021 rm

1. for文件清楚，易读，解耦合，提高代码扩展性，代码复用度

2. 如何体现这一思想？

    1. 信息发送接受物理层应用层分离，便于提高协议扩展度
    2. 外部中断在主函数下切换不同配置，切换图像分辨率
    3. 自动识别在armor函数下，采用状态机，根据当前状态切换模式

3. 需求分析

    由于信息同步的问题，多线程优化的时间<🔓等待的时间，整体采用单线程，串口读取数据多线程，接受信息赋值给全剧变量，实时更新，图像更新时用到读取，姿态融合。

     1. 接受下位机信息
         	1. 单开线程接受信息
            2. 当前角度，射速，位置等
     2. 识别图像信息
         	1. 灯条匹配， 数字识别
              	2. 装甲版类{矩形，中心位置，...}
              	3. 识别目标装甲版，返回装甲版优先队列
             * 图像中心位置权重高
             * 上一次识别目标权重高
             * 距离近的权重高
     3. 综合串口姿态和图像信息
         	1. 姿态融合
     4. 综合打击决策
         	1. 重力补偿
              	2. 预测
     5. 发送信息给串口
         	1. 调试信息散度

4. 文件结构

    工程树
    |——Armor
    |		|——Include
    |		|——Src
    |——CMakeLists.txt
    |——Tools // 包含常用数据结构定义，工具类，重力补偿模型，分类器参数等
    |		|——Include
    |       |       |——DataStructure.h
    |		|——Src
    |       |       |——Utils.cpp
    |——Other // 包含相机驱动，串口，配置文件等
    |		|——Include
    |       |       |——Serial.h
    |		|——Src
    |       |       |——Serial.cpp
    |		|——Library
    |		|		|——相机.so
    |		|——Configuration
    |		|		|——配置文件.cofig



5. 实现步骤

    1. 串口类编写
        1. 数据：不采用之前的协议，直接使用一个结构体将所有的信息传输，定长结构体
        2. receive_data根据buffer时事更新数据，根据图像变动需要读取结构体，可能需要加读锁。
    2. 相机驱动编写
    3. 装甲版识别调试
    4. 输出偏移信息调试

6. 命名规范
    1. 文件夹，文件，类名采用首字母大写的驼峰命名法
    2. 采用首字母小写的驼峰命名法
    3. 函数，实例，变量采用下划线命名法